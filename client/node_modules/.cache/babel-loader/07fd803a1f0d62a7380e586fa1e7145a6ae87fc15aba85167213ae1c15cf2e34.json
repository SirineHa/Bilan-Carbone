{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Bureau\\\\Projet\\\\Bilan-Carbone\\\\client\\\\src\\\\components\\\\bilan\\\\questionComponent.jsx\";\nimport React from \"react\";\nimport RadioButtonComponent from \"./radioButtonComponent\";\nimport InputComponent from \"./inputComponent\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class QuestionComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      questionResponse: {\n        ...props.questionResponse\n      },\n      question: props.question || {\n        option: []\n      },\n      onResponseChange: props.onResponseChange,\n      isValid: props.isValid\n    };\n    this.handleOptionChange = this.handleOptionChange.bind(this);\n    this.hasSubQuestion = this.hasSubQuestion.bind(this);\n    this.getSubQuestion = this.getSubQuestion.bind(this);\n    this.checkIfAllResponseIsValid = this.checkIfAllResponseIsValid.bind(this);\n  }\n  handleOptionChange(eventValue) {\n    this.setState({\n      ...this.state,\n      questionResponse: {\n        ...this.state.questionResponse,\n        ...eventValue\n      }\n    }, () => {\n      if (this.state.onResponseChange) {\n        this.state.onResponseChange(this.state.questionResponse);\n      }\n      if (this.state.isValid) {\n        this.state.isValid(this.checkIfAllResponseIsValid());\n      }\n    });\n  }\n  hasSubQuestion() {\n    const subQuestions = this.getSubQuestion();\n    return subQuestions && Array.isArray(subQuestions) && subQuestions.length > 0;\n  }\n  getSubQuestion() {\n    var _this$state$question$, _this$state$question$2;\n    return ((_this$state$question$ = this.state.question.option) === null || _this$state$question$ === void 0 ? void 0 : (_this$state$question$2 = _this$state$question$.find(opt => opt.value === this.state.questionResponse[this.state.question.id])) === null || _this$state$question$2 === void 0 ? void 0 : _this$state$question$2.subQuestion) || {};\n  }\n  checkIfAllResponseIsValid() {\n    let response = !!this.state.questionResponse[this.state.question.id];\n    if (this.hasSubQuestion()) {\n      this.getSubQuestion().forEach(question => {\n        response = response && !!this.state.questionResponse[question.id];\n      });\n    }\n    return response && Object.values(this.state.questionResponse).every(value => value !== null && value !== undefined && value !== '');\n  }\n  render() {\n    var _this$getSubQuestion;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col grow text-2xl leading-10 max-md:mt-10 max-md:max-w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-11 text-3xl text-neutral-800 max-md:mt-10 max-md:max-w-full\",\n          children: this.state.question.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 text-neutral-600 max-md:mt-10 max-md:max-w-full\",\n          children: this.state.question.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [this.state.question.type === \"radio\" && /*#__PURE__*/_jsxDEV(RadioButtonComponent, {\n              question: this.state.question,\n              value: this.state.questionResponse,\n              onOptionChange: this.handleOptionChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 33\n            }, this), this.state.question.type === \"text\" && /*#__PURE__*/_jsxDEV(InputComponent, {\n              question: this.state.question,\n              value: this.state.questionResponse,\n              onValueChange: this.handleOptionChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), this.hasSubQuestion() && ((_this$getSubQuestion = this.getSubQuestion()) === null || _this$getSubQuestion === void 0 ? void 0 : _this$getSubQuestion.map((question, index) => {\n        return /*#__PURE__*/_jsxDEV(QuestionComponent, {\n          questionResponse: this.state.questionResponse,\n          question: question,\n          onResponseChange: this.handleOptionChange\n        }, question.id + index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 29\n        }, this);\n      }))]\n    }, void 0, true);\n  }\n}","map":{"version":3,"names":["React","RadioButtonComponent","InputComponent","jsxDEV","_jsxDEV","Fragment","_Fragment","QuestionComponent","Component","constructor","props","state","questionResponse","question","option","onResponseChange","isValid","handleOptionChange","bind","hasSubQuestion","getSubQuestion","checkIfAllResponseIsValid","eventValue","setState","subQuestions","Array","isArray","length","_this$state$question$","_this$state$question$2","find","opt","value","id","subQuestion","response","forEach","Object","values","every","undefined","render","_this$getSubQuestion","children","className","title","fileName","_jsxFileName","lineNumber","columnNumber","description","type","onOptionChange","onValueChange","map","index"],"sources":["C:/Users/HP/OneDrive/Bureau/Projet/Bilan-Carbone/client/src/components/bilan/questionComponent.jsx"],"sourcesContent":["import React from \"react\";\nimport RadioButtonComponent from \"./radioButtonComponent\";\nimport InputComponent from \"./inputComponent\";\n\nexport default class QuestionComponent extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            questionResponse: {...props.questionResponse},\n            question: props.question || {option: []},\n            onResponseChange: props.onResponseChange,\n            isValid: props.isValid\n        };\n\n        this.handleOptionChange = this.handleOptionChange.bind(this);\n        this.hasSubQuestion = this.hasSubQuestion.bind(this);\n        this.getSubQuestion = this.getSubQuestion.bind(this);\n        this.checkIfAllResponseIsValid = this.checkIfAllResponseIsValid.bind(this);\n    }\n\n\n    handleOptionChange(eventValue) {\n        this.setState(\n            {\n                ...this.state,\n                questionResponse: {...this.state.questionResponse, ...eventValue}\n            },\n            () => {\n                if (this.state.onResponseChange) {\n                    this.state.onResponseChange(this.state.questionResponse);\n                }\n                if (this.state.isValid) {\n                    this.state.isValid(this.checkIfAllResponseIsValid());\n                }\n            });\n    }\n\n    hasSubQuestion() {\n        const subQuestions = this.getSubQuestion();\n        return subQuestions && Array.isArray(subQuestions) && subQuestions.length > 0;\n    };\n\n    getSubQuestion() {\n        return this.state.question.option?.find(opt => opt.value === this.state.questionResponse[this.state.question.id])?.subQuestion || {};\n    }\n\n    checkIfAllResponseIsValid() {\n        let response = !!this.state.questionResponse[this.state.question.id];\n        if (this.hasSubQuestion()) {\n            this.getSubQuestion().forEach((question) => {\n                response = response && !!this.state.questionResponse[question.id]\n            });\n        }\n        return response && Object.values(this.state.questionResponse).every(value => value !== null && value !== undefined && value !== '');\n    }\n\n    render() {\n        return (\n            <>\n                <div className=\"flex flex-col grow text-2xl leading-10 max-md:mt-10 max-md:max-w-full\">\n                    <div className=\"mt-11 text-3xl text-neutral-800 max-md:mt-10 max-md:max-w-full\">\n                        {this.state.question.title}\n                    </div>\n                    <div className=\"mt-2 text-neutral-600 max-md:mt-10 max-md:max-w-full\">\n                        {this.state.question.description}\n                    </div>\n                    <div className=\"mt-4\">\n                        <form>\n                            {this.state.question.type === \"radio\" &&\n                                <RadioButtonComponent question={this.state.question}\n                                                      value={this.state.questionResponse}\n                                                      onOptionChange={this.handleOptionChange}/>}\n\n                            {this.state.question.type === \"text\" &&\n                                <InputComponent question={this.state.question}\n                                                value={this.state.questionResponse}\n                                                onValueChange={this.handleOptionChange}/>}\n                        </form>\n                    </div>\n                </div>\n\n                {this.hasSubQuestion() && (\n                    this.getSubQuestion()?.map((question, index) => {\n                        return (\n                            <QuestionComponent key={question.id + index}\n                                               questionResponse={this.state.questionResponse}\n                                               question={question}\n                                               onResponseChange={this.handleOptionChange}/>\n                        );\n                    })\n                )}\n            </>\n        );\n    }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}